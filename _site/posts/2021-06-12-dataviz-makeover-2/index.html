<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Kelly's Blog: DataViz Makeover 2</title>

<meta property="description" itemprop="description" content="In this post, we use the same trade data use case over a 10 year period. We will critique the visualisation and propose an interative alternative, whereby users can interact with, to address the flaws."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-06-20"/>
<meta property="article:created" itemprop="dateCreated" content="2021-06-20"/>
<meta name="article:author" content="Kelly Koh"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Kelly&#39;s Blog: DataViz Makeover 2"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="In this post, we use the same trade data use case over a 10 year period. We will critique the visualisation and propose an interative alternative, whereby users can interact with, to address the flaws."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Kelly&#39;s Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Kelly&#39;s Blog: DataViz Makeover 2"/>
<meta property="twitter:description" content="In this post, we use the same trade data use case over a 10 year period. We will critique the visualisation and propose an interative alternative, whereby users can interact with, to address the flaws."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","preview","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["DataViz Makeover 2"]},{"type":"character","attributes":{},"value":["In this post, we use the same trade data use case over a 10 year period. We will critique the visualisation and propose an interative alternative, whereby users can interact with, to address the flaws."]},{"type":"character","attributes":{},"value":["images/dashboard.png"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation","affiliation_url"]}},"value":[{"type":"character","attributes":{},"value":["Kelly Koh"]},{"type":"character","attributes":{},"value":["https://www.linkedin.com/in/kellykkw/"]},{"type":"character","attributes":{},"value":["School of Computing and Information Systems, Singapore Management University"]},{"type":"character","attributes":{},"value":["https://scis.smu.edu.sg/"]}]}]},{"type":"character","attributes":{},"value":["2021-06-20"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","toc_float","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["animation.mp4","dataviz-makeover-2_files/anchor-4.2.2/anchor.min.js","dataviz-makeover-2_files/bowser-1.9.3/bowser.min.js","dataviz-makeover-2_files/distill-2.2.21/template.v2.js","dataviz-makeover-2_files/header-attrs-2.8/header-attrs.js","dataviz-makeover-2_files/jquery-1.11.3/jquery.min.js","dataviz-makeover-2_files/popper-2.6.0/popper.min.js","dataviz-makeover-2_files/tippy-6.2.7/tippy-bundle.umd.min.js","dataviz-makeover-2_files/tippy-6.2.7/tippy-light-border.css","dataviz-makeover-2_files/tippy-6.2.7/tippy.css","dataviz-makeover-2_files/tippy-6.2.7/tippy.umd.min.js","dataviz-makeover-2_files/webcomponents-2.0.0/webcomponents.js","images/bubble.png","images/china.png","images/dashboard.png","images/dashboard2.png","images/eu.png","images/footnote.png","images/indo.png","images/malaysia.png","images/original.jpg","images/rank.png","images/service.png","images/sketch.jpeg","images/star.png","images/step1.png","images/step10.png","images/step11.png","images/step12.png","images/step13.png","images/step14.png","images/step15.png","images/step16.png","images/step17.png","images/step18.png","images/step19.png","images/step2.png","images/step20.png","images/step21.png","images/step22.png","images/step23.png","images/step24.png","images/step25.png","images/step26.png","images/step27.png","images/step28.png","images/step29.png","images/step3.png","images/step30.png","images/step31.png","images/step32.png","images/step33.png","images/step34.png","images/step35.png","images/step36.png","images/step37.png","images/step38.png","images/step39.png","images/step4.png","images/step40.png","images/step41.png","images/step42.png","images/step5.png","images/step6.png","images/step7.png","images/step8.png","images/step9.png","images/us.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.8/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"DataViz Makeover 2","description":"In this post, we use the same trade data use case over a 10 year period. We will critique the visualisation and propose an interative alternative, whereby users can interact with, to address the flaws.","authors":[{"author":"Kelly Koh","authorURL":"https://www.linkedin.com/in/kellykkw/","affiliation":"School of Computing and Information Systems, Singapore Management University","affiliationURL":"https://scis.smu.edu.sg/","orcidID":""}],"publishedDate":"2021-06-20T00:00:00.000+08:00","citationText":"Koh, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Kelly's Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>DataViz Makeover 2</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>In this post, we use the same trade data use case over a 10 year period. We will critique the visualisation and propose an interative alternative, whereby users can interact with, to address the flaws.</p></p>
</div>

<div class="d-byline">
  Kelly Koh <a href="https://www.linkedin.com/in/kellykkw/" class="uri">https://www.linkedin.com/in/kellykkw/</a> (School of Computing and Information Systems, Singapore Management University)<a href="https://scis.smu.edu.sg/" class="uri">https://scis.smu.edu.sg/</a>
  
<br/>2021-06-20
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#critique-of-visualisation">1. Critique of Visualisation</a>
<ul>
<li><a href="#clarity">1.1 Clarity</a></li>
<li><a href="#aesthetic">1.2 Aesthetic</a></li>
</ul></li>
<li><a href="#proposed-design">2. Proposed Design</a>
<ul>
<li><a href="#clarity-1">2.1 Clarity</a></li>
<li><a href="#aesthetic-1">2.2 Aesthetic</a></li>
</ul></li>
<li><a href="#proposed-visualisation-on-tableau">3. Proposed Visualisation on Tableau</a></li>
<li><a href="#step-by-step-preparation">4. Step-By-Step Preparation</a></li>
<li><a href="#major-observations">5. Major Observations</a></li>
</ul>
</nav>
</div>
<h1 id="critique-of-visualisation">1. Critique of Visualisation</h1>
<p>The original visualisation (Figure 1) is created by Department of Statistics, Singapore (DOS) as an <a href="https://www.singstat.gov.sg/modules/infographics/singapore-international-trade">interactive infographic</a> to showcase Singapore’s International Trade. The data are available under the sub-section of <a href="https://www.singstat.gov.sg/find-data/search-by-theme/trade-and-investment/merchandise-trade/latest-data">Merchandise Trade by Region/Market</a>.</p>
<figure>
<img src="images/original.jpg" alt="Figure 1" /><figcaption aria-hidden="true">Figure 1</figcaption>
</figure>
<h3 id="clarity">1.1 Clarity</h3>
<ol type="1">
<li><strong>Size of Bubbles</strong>: Misleading size and no context.
<ul>
<li>A third set of figures (besides import and export value) determines the size of each bubble. However, there is no label to give it context. Readers can guess that it is the sum of export and import value after looking it a few bubbles but should not be forced to do so.</li>
<li>The bubbles are not sized correctly. For example from Figure 2 below, by overlaying Thailand’s bubble over Hong Kong’s, we can easily tell that the visual designer doubled the diameter when the area should be doubled instead. This gives an illusion that Hong Kong’s total trade value dwarfs Thailand and render the whole representation a highly misleading one.</li>
</ul></li>
</ol>
<figure>
<img src="images/bubble.png" id="id" class="class" style="width:50.0%" alt="Figure 2: Comparison of Hong Kong and Thailand Bubble Sizes" /><figcaption aria-hidden="true">Figure 2: Comparison of Hong Kong and Thailand Bubble Sizes</figcaption>
</figure>
<ol start="2" type="1">
<li><strong>Geographical Level</strong>: Varying levels used.
<ul>
<li>Markets of different geographical levels are being compared against each other. EU is an economic union of 27 members states; United States, Malaysia, Japan, Republic of Korea, Indonesia and Thailand are countries; and from Singapore’s perspective, Mainland China, Hong Kong and Taiwan are regional territories. This also contradicts how trade in service is represented in the later part of the <a href="https://www.singstat.gov.sg/modules/infographics/singapore-international-trade">infographic series</a> whereby EU members are represented at a country level, e.g. Switzerland and Netherlands as seen in Figure 3 below. The same geographical level should be used as far as possible except for special cases like Hong Kong, which has been treated as separate from Mainland China in trade and economics.</li>
</ul></li>
</ol>
<figure>
<img src="images/service.png" id="id" class="class" style="width:50.0%" alt="Figure 3: Major Trading Partners For Trade in Services, 2019" /><figcaption aria-hidden="true">Figure 3: Major Trading Partners For Trade in Services, 2019</figcaption>
</figure>
<ol start="3" type="1">
<li><strong>Y-Axis &amp; X-Axis</strong>: Improper labeling of both axes.
<ul>
<li>Both axes do not indicate the unit of measurement used, which should be ‘Export Value’ and ‘Import Value’ with ‘$X.XB’ as units.</li>
<li>There was no tick mark to provide reference for points on the scales.</li>
</ul></li>
<li><strong>Footnotes</strong>: Inaccurate and redundant footnotes.
<ul>
<li>The first footnote mentions that the size of the bubble reflects the total merchandise trade value with the trading partner, which is incorrect as mentioned in 1.1.1 (Size of Bubbles).</li>
<li>The first footnote also indicates that if the value of the imports exceed exports, the centre point (white circle) of the bubble falls into the ‘Net Importers’ section and vice versa for exports. However, a glance at the infographic shows that we are unable to see 4 of the countries’ white circles, leaving readers guessing the trade status of EU and Republic of Korea since they are placed so close to the borders.</li>
<li>The second footnote (see Figure 4 below) mentions that since 2009, Mainland China has changed from a net importer to a net exporter and US has changed from a net exporter to net importer since 2006. Firstly, the visualization has no data showing the change for both markets. Secondly, the chart contradicts the call-out on US. From the chart, we see US as a net exporter, which leaves the reader puzzled when has US changed from a net importer to a net exporter and the purpose of this call-out.</li>
</ul></li>
</ol>
<figure>
<img src="images/footnote.png" id="id" class="class" style="width:100.0%" alt="Figure 4: Annotation on trade with the US contradicts bubble chart" /><figcaption aria-hidden="true">Figure 4: Annotation on trade with the US contradicts bubble chart</figcaption>
</figure>
<ol start="5" type="1">
<li><strong>Title</strong>: No context given.
<ul>
<li>No title was included with the visualization to set the context. There is uncertainty on the period of observation for the visualization and why are these markets chosen. However, we do see the header ‘MERCHANDISE TRADE PERFORMANCE WITH MAJOR TRADING PARTNERS, 2020’ when referring to the source website.</li>
</ul></li>
</ol>
<h3 id="aesthetic">1.2 Aesthetic</h3>
<ol type="1">
<li><strong>Legend</strong>: The legend for top net exporter and net importer is placed after the footnotes, making readers wonder the purpose of the star symbols in Figure 5 when looking at the visualization.</li>
</ol>
<figure>
<img src="images/star.png" id="id" class="class" style="width:70.0%" alt="Figure 5: Star symbols representing top net exporter and top net importer" /><figcaption aria-hidden="true">Figure 5: Star symbols representing top net exporter and top net importer</figcaption>
</figure>
<ol start="2" type="1">
<li><strong>Colours and Labels</strong>: Visualization designer has made use of labels on the chart to determine each market. However, different colors are also used for each market even though there is no new information provided.</li>
<li><strong>Opacity</strong>: The white circles within the larger bubbles are suppose to help place the markets in net exporter and importer sections. However, occlusion issue plague the whole visualization as the bubbles overlap. Many of the white circles could not be seen unless users interact with the visualization. And even so, an ambiguous case like the EU (see Figure 6 below) which lies close to the border still cannot be identified as an net importer or exporter.</li>
</ol>
<figure>
<img src="images/eu.png" id="id" class="class" style="width:50.0%" alt="Figure 6: Ambiguity in EU trade status" /><figcaption aria-hidden="true">Figure 6: Ambiguity in EU trade status</figcaption>
</figure>
<h1 id="proposed-design">2. Proposed Design</h1>
<p>The initial sketch of proposed design is as follow (Figure 7):</p>
<figure>
<img src="images/sketch.jpeg" alt="Figure 7: Sketch of proposed visualisation" /><figcaption aria-hidden="true">Figure 7: Sketch of proposed visualisation</figcaption>
</figure>
<h3 id="clarity-1">2.1 Clarity</h3>
<ol type="1">
<li><strong>Size of Bubbles</strong>:
<ul>
<li>Fix the size of the bubbles and add a legend to indicate the unit of measurement ‘Annual Total Trade Value’</li>
</ul></li>
<li><strong>Geographical Level</strong>:
<ul>
<li>Select the top 10 trade partners ranked by trade value at country and administrative zone level, which will exclude EU and include Germany.</li>
</ul></li>
<li><strong>Y-Axis &amp; X-Axis</strong>:
<ul>
<li>Include labels ‘Import Value’ and ‘Export Value’ as headers for the axes and indicate the unit ‘$X.XB’ with tick marks for the bubble chart.</li>
</ul></li>
<li><strong>Footnotes</strong>:
<ul>
<li>Remove redundant footnote and annotate highlights of changes in trade performance of partners over the year</li>
<li>Eliminate the uncertainty of the net importer and net exporter status with a separate chart that shows the ranks of partners by total trade value, net importer and net exporter status</li>
<li>Historical export and import values and balance of trade figures of each partner could also be displayed when readers want to find out more about each market using tooltip function to not clutter the visualization</li>
</ul></li>
<li><strong>Title</strong>:
<ul>
<li>Include a main dashboard title to set the context</li>
<li>Add title with key insight and a functional title with reference to the axes and granularity of the data</li>
</ul></li>
</ol>
<h3 id="aesthetic-1">2.2 Aesthetic</h3>
<ol type="1">
<li><strong>Legend</strong>:
<ul>
<li>Legends and notes that carry key information are placed on the left of the dashboard so that reader can quickly pick up the key information required when reading the bubble chart</li>
</ul></li>
<li><strong>Colours and Labels</strong>:
<ul>
<li>Different colours are being used for each partners for the purpose of recognizing the trail of historical values in both charts as the visualization animates</li>
<li>Each bubble will retain the label with the name of the partner and total trade value of the year</li>
<li>Colours are chosen for each partner based on their geographical region, e.g. South East Asia markets like Thailand, Malaysia and Indonesia will adopt green hues, East Asia markets like Mainland China, Hong Kong, Japan, Taiwan, and Korea will adopt pink and purple hues. Germany and United States will adopt grey and brown respectively to distinguish themselves from the rest</li>
<li>Import value and net importers will be represented by orange and export value and net exporters will be represented by blue so that they can be easily distinguished by color blind readers</li>
</ul></li>
<li><strong>Opacity</strong>:
<ul>
<li>Bubbles will be semi-transparent with white borders for readers to see the sizes clearly</li>
</ul></li>
</ol>
<h1 id="proposed-visualisation-on-tableau">3. Proposed Visualisation on Tableau</h1>
<p>Please view the proposed visualisation on Tableau Public <a href="https://public.tableau.com/app/profile/kelly2850/viz/DatavizMakeover2_16241730883380/Dashboard">here</a>.</p>
<figure>
<img src="images/dashboard.png" id="id" class="class" style="width:100.0%" alt="Figure 8: Dashboard at 2011" /><figcaption aria-hidden="true">Figure 8: Dashboard at 2011</figcaption>
</figure>
<figure>
<img src="images/dashboard2.png" id="id" class="class" style="width:100.0%" alt="Figure 9: Dashboard at 2020 with tooltip over Indonesia" /><figcaption aria-hidden="true">Figure 9: Dashboard at 2020 with tooltip over Indonesia</figcaption>
</figure>
<h1 id="step-by-step-preparation">4. Step-By-Step Preparation</h1>
<div class="l-body">
<table>
<colgroup>
<col style="width: 2%" />
<col style="width: 30%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="header">
<th>No</th>
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Unzip the output folder downloaded from the SingStat website. Load the outputFile excel file into Tableau Prep Builder. Drag the ‘T1’ and ‘T2’ worksheet into main pane.</td>
<td><img src="images/step1.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>2</td>
<td>Use the Data Interpreter. Rename ‘T1’ and ‘T2’ to ‘Import’ and ‘Export’ respectively and initiate the cleaning node from each data node.</td>
<td><img src="images/step2.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Under the ‘Clean 1’ node, clean ‘Variables’ using ‘Split Values’ with ‘(‘ as the separator. Rename column as ‘Country’. Repeat for ‘Clean 2’.</td>
<td><img src="images/step3.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>4</td>
<td>Under ‘Clean 1’ node, filter the rows under ‘Country’ to remove non-Country and total observations. Repeat for ‘Clean 2’.</td>
<td><img src="images/step4.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Add Pivot nodes after ‘Clean 1’ and ‘Clean 2’. Under ‘Pivot 1’, select all months under ‘Fields’ to the ‘Pivoted Fields’ panel. Repeat for ‘Pivot 2’.</td>
<td><img src="images/step5.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>6</td>
<td>Under ‘Pivot 1’, rename ‘Pivot1 Names’ to ‘Month’ and change data type to ‘Date’. Rename ‘Pivot1 Values’ to ‘Import (Thousand Dollars)’. Remove ‘Variables’. Repeat for ‘Pivot 2’ but rename ‘Pivot1 Values’ to ‘Export (Thousand Dollars)’.</td>
<td><img src="images/step6.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>7</td>
<td>Do a full join between ‘Pivot 1’ and ‘Pivot 2’ with ‘Country’ and ‘Month’ as the join clauses.</td>
<td><img src="images/step7.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>8</td>
<td>Create a ‘Clean’ node after ‘Join 1’ to merge duplicated country and month variables.</td>
<td><img src="images/step8.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>9</td>
<td>Create a ‘Pivot’ node after ‘Clean 3’ and change ‘Export (Thousand Dollars)’ and ‘Import (Thousand Dollars)’ from columns to rows.</td>
<td><img src="images/step9.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>10</td>
<td>Split ‘Pivot1 Names’ and rename the field of ‘Split 1’ to ‘Trade Type’. Multiply ‘(Thousand Dollars)’ by 1000 and rename it ‘Trade Value’. Remove the unnecessary fields ‘(Thousand Dollars)’ and ‘Pivot1 Names’.</td>
<td><img src="images/step10.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>11</td>
<td>Create a ‘Output’ node after ‘Pivot 3’ node and save output as ‘Monthly Singapore Merchandise Trade’.</td>
<td><img src="images/step11.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>12</td>
<td>Set up a connection on Tableau Desktop to the ‘Monthly Singapore Merchandise Trade’ hyper’s extract.</td>
<td><img src="images/step12.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>13</td>
<td>For the bubble chart, create a new worksheet and name it ‘Bubble Chart’. Click on ‘Analysis’ on the ribbon, and select ‘Create Calculated Field’ to create 2 calculated fields – ‘Export’ and ‘Import’ using the ‘IF X THEN X END’ formulas shown.</td>
<td><img src="images/step13.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>14</td>
<td>Drag ‘Export’ to Columns and ‘Import’ to Rows and drag ‘Country’ to ‘Detail’ under Marks. Tableau will automatically present a scatter plot.</td>
<td><img src="images/step14.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>15</td>
<td>Drag ‘Month’ to ‘Filters’ and select ‘Range of Dates’. Then input ‘1 Jan 2011’ as the start date and ‘1 Dec 2020’ as the end date. Next, drag ‘Country’ to ‘Filters’ and select ‘Top’ tab. We will select the top 10 partners by sum of the ‘Trade Value’.</td>
<td><img src="images/step15.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>16</td>
<td>Drag ‘Trade Value’ to ‘Size’ under Marks and ‘Country’ to ‘Color’. Select on ‘Color’ under marks to change the default colors. Under ‘Select Color Palette’, select Tableau 20. Assign the partners as planned, East Asia markets with pink and purple hues, South East Asia markets in greenish hues, and Germany in Grey and US in brown.</td>
<td><img src="images/step16.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>17</td>
<td>Change the type of charts under ‘Marks’ to ‘Circle’. Then select ‘Color’ to change the opacity of the bubbles to 65% and add a white border under ‘Effects’.</td>
<td><img src="images/step17.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>18</td>
<td>To create a diagonal reference line in the bubble chart, create a new ‘Calculated Field’ called ‘Reference Line’ with ‘Export’ variable. Then drag the newly created ‘Reference Line’ to secondary Y-Axis position on the bubble chart as shown.</td>
<td><img src="images/step18.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>19</td>
<td>Then click on the ‘SUM(Reference Line)’ section under ‘Marks’. Change the chart type from ‘Circle’ to ‘Line’ and only keep ‘Country’ under ‘Detail’. Next, change the ‘Size’ of the line to the thinnest and change the ‘Opacity’ to 0%. To bring out a nice reference line, right click on the reference line on the chart and select ‘Show Trend Lines’.</td>
<td><img src="images/step19.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>20</td>
<td>Right click on the secondary Y-Axis to select ‘Synchronize Axis’ and uncheck ‘Show Header’. Right click on the trend line to format it to a light shade of grey and thinner profile. Discard ‘Measure Names’ under the ‘SUM(Import)’ section under ‘Marks’ to allow the colours of the markets to revert to initial selection.</td>
<td><img src="images/step20.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>21</td>
<td>Drag ‘Month’ into ‘Pages’. Right click on the chart to add the year to the chart by selecting ‘Area’ under ‘Annotate’. Insert ‘<Page Name>’ and increase the font size to 36 color to light grey. Format the annotation to remove the shading.</td>
<td><img src="images/step21.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>22</td>
<td>To shade the background diagonally to create ‘Net Importer’ and ‘Net Exporter’ segments, we create a simple square image with 2 triangles using powerpoint. We then load this image into Tableau using ‘Map’ &gt; ‘Background Images’. Select the image created and position it on the chart carefully using the coordinates. Tweak the washout to avoid overwhelming the chart with colours.</td>
<td><img src="images/step22.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>23</td>
<td>Add area annotations to the chart to mark the ‘Net Importer’ and ‘Net Exporter’ segments. Format each with the colour determined – orange for import and blue for export and remove the shading of the text.</td>
<td><img src="images/step23.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>24</td>
<td>Drag ‘Country’ and ‘Trade Value’ to ‘Label’ under ‘Marks’. Format the labels – reduce font size to 8 and select ‘Match Mark Color’.</td>
<td><img src="images/step24.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>25</td>
<td>Format all values on chart. Right click on the X-axis and select ‘Format’. A formatting pane will appear on the left. Under ‘Font’, change the font colour for X-Axis to blue. Under ‘Scale’, change the ‘Ticks’ to a darker grey and select ‘Currency (Custom)’ under ‘Numbers’ to format values to 1 decimal place in Billions. Repeat for Y-Axis (font colour in orange). Select ‘Label’ under ‘Marks’ to update the ‘Numbers’ format under ‘Pane’.</td>
<td><img src="images/step25.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>26</td>
<td>Right click on the X-Axis and select ‘Edit Axis’. Under ‘General’ tab, uncheck ‘Include Zero’ and change ‘Title’ to ‘Export Value’. Switch to ‘Tick Marks’ tab and fix the ‘Major Tick Marks’ to $10B interval and remove minor tick marks. Repeat for Y-Axis with ‘Import Value’.</td>
<td><img src="images/step26.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>27</td>
<td>Add the main insight title and functional title with the unit of measurement and granularity of data as shown. Allow the labels in the chart to be viewed by selecting ‘Always Show’ under ‘Mark Label’ for labels that are hidden. Shift the labels around the chart to ensure that can always be seen as the pages change. Under the pages’ control, check the ‘Show history’ box and show ‘All’ of ‘Trails’.</td>
<td><img src="images/step27.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>28</td>
<td>Next, we prepare for charts that will provide more details of the partners under the tooltips when users explore the bubble charts. We create a new worksheet called ‘Tooltip Charts’. We want to feature 3 charts: i) annual trade value, ii) year-on-year change of annual trade value, iii) annual balance of trade. For chart iii), we create a new calculated field ‘Balance of Trade’ by taking sum of export minus sum of import as shown. Then, we add ‘Month’ to ‘Filters’ and select range like in Step 15. To set up the 3 charts, we drag ‘Month’ to ‘Columns’, ‘Trade Value’ and ‘Balance of Trade’ to ‘Rows’. Drag ‘Trade Value’ to ‘Rows’ again and select the drop down to do a quick table calculation – ‘Year Over Year Growth’.</td>
<td><img src="images/step28.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>29</td>
<td>Change the chart type under ‘Marks’ to ‘Bar’ and ‘Line’ respectively as shown. For chart i) on total trade value, drag ‘Trade Type’ to ‘Color’. Export will be in blue and import will be in orange, similar for chart ii). For chart iii), drag ‘Balance of Trade’ to ‘Color’ and select ‘Custom Diverging’ with the center at 0, the negative end will be the orange selected for import and positive end will be the blue selected for export.</td>
<td><img src="images/step29.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>30</td>
<td>Add values to the ‘Label’ section under each chart by dragging ‘Trade Value’ to ‘Label’ for chart i), ‘Trade Value YoY %’ to chart ii) and ‘Balance of Trade’ to chart iii). Next, format the labels to show them all at font size 8, allowing labels to overlap. Currency will be expressed in 1 decimal place in Billions and percentage in 1 decimal place using the same format procedure shown in step 25.</td>
<td><img src="images/step30.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>31</td>
<td>Add the total trade value label by adding a reference line to chart i)’s Y-Axis. Select ‘Sum’ and indicate ‘Value’ under ‘Label’. Under ‘Formatting’, select ‘None’ for ‘Line’.</td>
<td><img src="images/step31.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>32</td>
<td>After we are done with the tooltip charts, we will resize the chart by dragging the edges of the borders. We can continue to tweak after seeing how it fits under the bubble chart’s tooltip.</td>
<td><img src="images/step32.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>33</td>
<td>As we want to indicate if the partner is a net exporter or net importer at the snapshot, we created new calculated fields ‘Net Exporter’ and ‘Net Importer’. Next, we also want to feature the rank of the partner by ‘Trade Value’, ‘Net Exporter’ and ‘Net Importer’, we created calculated fields to rank the partners as shown.</td>
<td><img src="images/step33.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>34</td>
<td>Next, we will set up the tooltip content. Drag ‘Net Exporter’, ‘Net Importer’, ‘Rank by Trade Value’, ‘Rank by Net Exporter’ and ‘Rank by Net Importer’ all to ‘Tooltip’ under the ‘SUM(Import)’ section under ‘Marks’. Click on the ‘Tooltip’ icon to launch the editor and input the text interspersed with inserted variables as shown. Insert the ‘Tooltip Charts’ worksheet at the end of the text. Format the text by colouring all import related to be orange and export related to be blue.</td>
<td><img src="images/step34.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>35</td>
<td>To start on the second chart on the dashboard to display rank, we create a new worksheet ‘Rank’. We then drag ‘Country’ and ‘Month’ to ‘Filters’ (similar to step 15) and ‘Month’ to ‘Pages’ to limit the country and years. We create the chart by dragging ‘Month’ to ‘Columns’ and ‘Rank by Trade Value’, ‘Rank by Net Importer’ and ‘Rank by Net Exporter’ to ‘Rows’. To have the ranking computed at country level, we drag ‘Country’ to ‘Color’ under ‘All’ section under ‘Marks’. Then, we can compute the rank using ‘Country’ ausing the dropdown option.</td>
<td><img src="images/step35.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>36</td>
<td>To sync the animation with the bubble chart, we switch the chart type under ‘Marks’ to ‘Circle’ and reduce the size of the circle. Next, we will check the ‘Show history’ box for the control for ‘Pages’ on the right pane. To show the trails of the ranks, we will show history for ‘All’ and show ‘Trails’ marks only.</td>
<td><img src="images/step36.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>37</td>
<td>To add tooltips to the rank charts, we drag the relevant variables to the ‘Tooltip’ icon under ‘Marks’ and insert them corresponding to the content we want to feature as shown.</td>
<td><img src="images/step37.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>38</td>
<td>We will also need to refine the Y-Axes so that we show the ranking from top to bottom. To do that, we will edit all 3 axes so that the scales are reversed. To prevent the 0 from showing, we will format the scales using ‘Custom’ and adding a semi-colon and a space (‘;’) behind the custom number format. For the net exporter and net importer scale, we will also colour the fonts with blue and orange respectively to sync with the bubble chart.</td>
<td><img src="images/step38.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>39</td>
<td>A final touch to the rank charts is to add a main title and a functional title as shown.</td>
<td><img src="images/step39.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="even">
<td>40</td>
<td>We are finally ready to pull the 2 charts together to form a dashboard. Create a new dashboard and drag the ‘Bubble Chart’ and ‘Rank’ sheets to the panes as shown. Next, format the legend so that they are presented on the left side of the bubble chart. In order to prompt users to play the animation, we change the Pages header to ‘Play Animation’. Lastly, we add a main dashboard header and a footnote to point readers to the data source.</td>
<td><img src="images/step40.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
<tr class="odd">
<td>41</td>
<td>Once completed, we hide the worksheets and proceed to publish the dashboard on Tableau Public.</td>
<td><img src="images/step41.png" id="id" class="class" style="width:100.0%" /></td>
</tr>
</tbody>
</table>
</div>
<h1 id="major-observations">5. Major Observations</h1>
<ol type="1">
<li><strong>Rank Overview</strong>:</li>
</ol>
<ul>
<li>From the rank chart below (Figure 10), we observe that out of Singapore’s top 10 merchandise trade partners in 2020, 6 are net exporters with Hong Kong always topping the list. The other 4 are net importers with Taiwan topping since 2018.</li>
<li>Mainland China has been Singapore’s top merchandise trade partner since it overtook Malaysia in 2013.</li>
<li>There are several switchers among the major partners: South Korea switched from a net importer to net exporter in 2017, Malaysia switched to net importer in 2019 and United States switched to net exporter in 2020.</li>
<li>Greatest dip in rank: Indonesia had seen the greatest drop in rank, from 3rd in 2011 to 7th in 2020.</li>
<li>Greatest climb in rank: Taiwan had climbed from 8th position in 2011 to 4th in 2020.</li>
<li>We will look at the bubble chart to understand the drivers for the changes mentioned above.</li>
</ul>
<figure>
<img src="images/rank.png" alt="Figure 10: Rank of trade partners from 2011 to 2020" /><figcaption aria-hidden="true">Figure 10: Rank of trade partners from 2011 to 2020</figcaption>
</figure>
<ol start="2" type="1">
<li><strong>Indonesia - sharp decline driven by lower exports</strong>:</li>
</ol>
<ul>
<li>From bubble chart and tooltip chart below (Figure 11), we see that Singapore’s export to Indonesia had shrunk almost every year, except in 2017 and 2018. The dip was the steepest in 2020 with -20.8% YoY. This has led to a big drop in annual trade value with Indonesia - the decline was more than $30B in annual trade over the 10 years.</li>
<li>As a result, the balance of trade with Indonesia in 2020 has also shrank to a third of 2011 to $10.3B.</li>
<li>A <a href="https://www.businesstimes.com.sg/sme/indonesia-a-market-where-obstacles-and-opportunities-co-exist">Business Times article</a> suggests that while Indonesia is a fast growing country with business opportunities, Singapore companies face infrastructural and regulatory hurdles in their expansion. In addition, the depreciation of Indonesia rupiah might have weakened the trade performance.</li>
</ul>
<figure>
<img src="images/indo.png" id="id" class="class" style="width:100.0%" alt="Figure 11: Indonesia on bubble chart and tooltip" /><figcaption aria-hidden="true">Figure 11: Indonesia on bubble chart and tooltip</figcaption>
</figure>
<ol start="3" type="1">
<li><strong>Mainland China - saturating growth with trade war and pandemic</strong>:</li>
</ol>
<ul>
<li>From bubble chart and tooltip chart below (Figure 12), we notice that trade between Mainland China was not all smooth-sailing through the years. There were 2 major dips in exports in 2016 and 2018 respectively. Total trade value had been hovering between $135B-$137B since 2017.</li>
<li>The US-China trade war that started in 2018 led to a slowdown in the Chinese economy, which in turn reduced China’s import demand. Singapore’s export to Mainland China trended in line, dipping -8.8% in 2018. The respite in 2019 when exports grew 3.5% was short-lived. In 2020, as the the world battles the COVID-19 pandemic, export to Mainland China grew marginally at 0.6%.</li>
<li>Singapore’s demand for Mainland China’s exports has grew over the years but had seen a slowdown from 2019. This might be due to the slowdown in global economic growth and lower demand in electronics.</li>
</ul>
<figure>
<img src="images/china.png" id="id" class="class" style="width:100.0%" alt="Figure 12: Mainland China on bubble chart and tooltip" /><figcaption aria-hidden="true">Figure 12: Mainland China on bubble chart and tooltip</figcaption>
</figure>
<ol start="4" type="1">
<li><strong>United States - growth disrupted by pandemic</strong>:</li>
</ol>
<ul>
<li>From the bubble chart and tooltip chart below (Figure 13), we see that total trade with US spiked in 2018. In 2020, with the start of the COVID-19 pandemic, total trade with US dipped as imports from US plunged 19% YoY. We see divergence in export and import growth, resulting in US becoming a net exporter (+$5.7B) for the first time in the last 10 years.</li>
<li>With the start of new trade war between US and China in 2018, US tariffs on China led to a trade diversion, making players like Singapore more competitive in the US market. In line with this hypothesis, we observe the greatest year-on-year growth in both US exports and imports in 2018, suggesting that it is likely that Singapore has gained from the trade war.</li>
</ul>
<figure>
<img src="images/us.png" id="id" class="class" style="width:100.0%" alt="Figure 13: United States on bubble chart and tooltip" /><figcaption aria-hidden="true">Figure 13: United States on bubble chart and tooltip</figcaption>
</figure>
<ol start="5" type="1">
<li><strong>Malaysia - weak export led to net importer status change</strong>:</li>
</ol>
<ul>
<li>Based on the bubble chart and tooltip chart below (Figure 14), we see that Malaysia’s annual total trade value in 2020 has shrunk compared to 2011. This is mainly due to weakening exports since 2014.</li>
<li>Exports to Malaysia saw recovery briefly in 2017 and 2018, followed by a decline in 2019 before tumbling to a new low in 2020 when the pandemic hit.<br />
</li>
<li>Uncertainties from the US-China trade war might have led to weaker business confidence, weighing down the demand from Malaysia in 2019.</li>
<li>Lower exports coupled with steady demand for Malaysia’s exports led to Malaysia switching to a net importer in 2019 (-$0.7B).</li>
</ul>
<figure>
<img src="images/malaysia.png" id="id" class="class" style="width:100.0%" alt="Figure 14: Malaysia on bubble chart and tooltip" /><figcaption aria-hidden="true">Figure 14: Malaysia on bubble chart and tooltip</figcaption>
</figure>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
